var Client;(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e,t,n,a,i,o,r){try{var d=e[o](r),c=d.value}catch(e){return void n(e)}d.done?t(c):Promise.resolve(c).then(a,i)}e.r(t),e.d(t,{handleSubmit:()=>a,updateUI:()=>i});var a=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,a,i,o,r,d,c,s,m,p,l,v,u,g,h,y,f,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=document.getElementById("city").value,a=document.getElementById("start").value,i=document.getElementById("end").value,o=new Date,r=new Date(a),d=new Date(i),c=r.getTime()-o.getTime(),s=Math.round(c/864e5),m={startDate:a,endDate:i,diffInDays:s},""!==n){e.next=13;break}return alert("Please enter a city name."),e.abrupt("return");case 13:if(!(r<o||d<r)){e.next=16;break}return alert("Invalid date: either you select past date as start date or set end date earlier than start date."),e.abrupt("return");case 16:return console.log("::: Form Submitted :::"),p={},l={},v={},console.log("Fetching geographical data from geonames:",{city:n}),e.next=23,fetch("/city",{method:"POST",credentials:"same-origin",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({city:n})});case 23:return u=e.sent,e.prev=24,e.next=27,u.json();case 27:g=e.sent,p={city:g.geonames[0].name,country:g.geonames[0].countryName,lat:g.geonames[0].lat,lon:g.geonames[0].lng},console.log("Data received from geonames:",p),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(24),console.log("error",e.t0);case 35:return console.log("Fetching weather data from weatherbit:",{cityLatLon:p}),e.next=38,fetch("/weather",{method:"POST",credentials:"same-origin",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});case 38:return h=e.sent,e.prev=39,e.next=42,h.json();case 42:l=e.sent,console.log("Data received from weatherbit:",l),e.next=49;break;case 46:e.prev=46,e.t1=e.catch(39),console.log("error",e.t1);case 49:return console.log("Fetching a pic from pixabay:",{cityLatLon:p}),e.next=52,fetch("/pic",{method:"POST",credentials:"same-origin",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});case 52:return y=e.sent,e.prev=53,e.next=56,y.json();case 56:v=e.sent,console.log("Data received from pixabay:",v),e.next=63;break;case 60:e.prev=60,e.t2=e.catch(53),console.log("error",e.t2);case 63:f=document.querySelector("main"),(b=document.createElement("section")).setAttribute("id","trip"),b.innerHTML=Client.updateUI(m,v,p,l),f.appendChild(b);case 68:case"end":return e.stop()}}),e,null,[[24,32],[39,46],[53,60]])})),function(){var t=this,a=arguments;return new Promise((function(i,o){var r=e.apply(t,a);function d(e){n(r,i,o,d,c,"next",e)}function c(e){n(r,i,o,d,c,"throw",e)}d(void 0)}))});return function(e){return t.apply(this,arguments)}}();function i(e,t,n,a){return'\n            <div id="dest_img">\n                <img src="'.concat(t.hits[0].webformatURL,'" alt="">\n            </div>\n            <div id="dest_countdown">\n                in ').concat(e.diffInDays,' days\n            </div>\n            <div id="destination">\n                <p>Your Trip To:</p>\n                <h3>').concat(n.city,", ").concat(n.country,'</h3>\n            </div>\n            <div id="dest_date">\n                <p>Dates:</p>\n                <h4>').concat(e.startDate," To ").concat(e.endDate,'</h4>\n            </div>\n            <div id="forecast">\n                <p>3-Day Weather Forecast:</p>\n            </div>\n\n            <div id="dest_weather">\n                <div id="card">\n                    <div id="date">').concat(a.data[0].datetime,'</div>\n                    <div id="icon"><img src="../media/').concat(a.data[0].weather.icon,'.png" alt="').concat(a.data[0].weather.description,'"></div>\n                    <div id="temp">H:').concat(a.data[0].max_temp,"° | L:").concat(a.data[0].min_temp,'°</div>\n                    <div id="pop">').concat(a.data[0].pop,'%</div>\n                </div>\n                <div id="card">\n                    <div id="date">').concat(a.data[1].datetime,'</div>\n                    <div id="icon"><img src="../media/').concat(a.data[1].weather.icon,'.png" alt="').concat(a.data[1].weather.description,'"></div>\n                    <div id="temp">H:').concat(a.data[1].max_temp,"° | L:").concat(a.data[1].min_temp,'°</div>\n                    <div id="pop">').concat(a.data[1].pop,'%</div>\n                </div>\n                <div id="card">\n                    <div id="date">').concat(a.data[2].datetime,'</div>\n                    <div id="icon"><img src="../media/').concat(a.data[2].weather.icon,'.png" alt="').concat(a.data[2].weather.description,'"></div>\n                    <div id="temp">H:').concat(a.data[2].max_temp,"° | L:").concat(a.data[2].min_temp,'°</div>\n                    <div id="pop">').concat(a.data[2].pop,"%</div>\n                </div>\n            </div>\n            ")}document.getElementById("submit").addEventListener("click",a),Client=t})();